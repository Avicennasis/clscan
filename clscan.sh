#!/bin/bash
echo '#!/bin/bash' >temp.sh && sleep 10 | lynx -cache=0 -dump -listonly pittsburgh.craigslist.org/search/gms | grep " http://pittsburgh.craigslist.org/gms/.*" | sed s/.*http/'echo "http'/ | sed s/html/'html" | wget -O- -i- | hxnormalize -x | hxselect -i "#postingbody" | lynx -stdin -dump >> results1.txt \&\& sleep 3'/ | sed s/'echo .*html"'/"& >>results1.txt | &"/ | sort -u >> temp.sh | chmod a+x temp.sh && sleep 10 | ./temp.sh && sleep 10 | rm temp.sh | sed ':a;N;$!ba;s/\n/ /g' results1.txt > temp.txt && sleep 10 | sed -e $'s/http/\\\nhttp/g' temp.txt >results1.txt && sleep 10 | gawk -v "regex=mario|ps[34]|xbox|gameboy|linux|sega|brewing|books|guitar" 'BEGIN { IGNORECASE = 1 } $0 ~ regex { a = $0; printf "Match! "; while (match(a, regex)) { printf "(%s)", substr(a, RSTART, RLENGTH); a = substr(a, RSTART + RLENGTH) } printf " " } { print }' results1.txt >temp.txt && sleep 10 | sed s/\.html.*/\.html/g temp.txt >temp2.txt && sleep 10 | sed '/^h/ d' temp2.txt >results1.txt && sleep 10 | rm temp.txt | rm temp2.txt

echo '#!/bin/bash' >temp.sh && sleep 10 | lynx -cache=0 -dump -listonly pittsburgh.craigslist.org/search/gms?s=100 | grep " http://pittsburgh.craigslist.org/gms/.*" | sed s/.*http/'echo "http'/ | sed s/html/'html" | wget -O- -i- | hxnormalize -x | hxselect -i "#postingbody" | lynx -stdin -dump >> results2.txt \&\& sleep 3'/ | sed s/'echo .*html"'/"& >>results2.txt | &"/ | sort -u >> temp.sh | chmod a+x temp.sh && sleep 10 | ./temp.sh && sleep 10 | rm temp.sh | sed ':a;N;$!ba;s/\n/ /g' results2.txt > temp.txt && sleep 10 | sed -e $'s/http/\\\nhttp/g' temp.txt >results2.txt && sleep 10 | gawk -v "regex=mario|ps[34]|xbox|gameboy|linux|sega|brewing|books|guitar" 'BEGIN { IGNORECASE = 1 } $0 ~ regex { a = $0; printf "Match! "; while (match(a, regex)) { printf "(%s)", substr(a, RSTART, RLENGTH); a = substr(a, RSTART + RLENGTH) } printf " " } { print }' results2.txt >temp.txt && sleep 10 | sed s/\.html.*/\.html/g temp.txt >temp2.txt && sleep 10 | sed '/^h/ d' temp2.txt >results2.txt && sleep 10 | rm temp.txt | rm temp2.txt

cat results1.txt >results.txt && sleep 2 | cat results2.txt >>results.txt && sleep 2 | rm results1.txt | rm results2.txt
